<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("../partitions/head.ejs") %>
</head>
<body>
    <%- include("../partitions/navbar.ejs") %> 
    <div class="container-sm mt-3">
        <h1 class="display-6 mb-3 text-center"><%= headerTitle %></h1>
        <form action=<%= action %> method=<%= method %>>
            <% fields.forEach(field => { %>
                <div class="mb-3">
                    <label class="form-label" for=<%= field %> ><%= field %></label>
                    <% if(field == 'ID'){ %>
                        <input id=<%= field %> readonly class="form-control" type=<%= datatypes[field] %> name=<%= field %> value="<%= values[field] %>">
                    <% } else { %>
                        <input id=<%= field %> class="form-control" type=<%= datatypes[field] %> name=<%= field %> value="<%= values[field] %>">
                    <% } %>
                </div>
            <% }) %>
            <div class="mb-3 row">
                <label class="form-label col-md-6" >
                    Car
                    <select class="form-control" name="car-id-list">
                        <% cars.forEach(car => { %>
                            <option value="<%= car['ID'] %>"><%= car['NAME'] %></option>
                        <% }) %>
                    </select>
                </label>
                <label class="form-label col-md-4" >
                    Quantity
                    <input class="form-control" type="number" name="quantity-list" value="1" min="1" max="100">
                </label>
            </div>
            <button class="btn btn-sm btn-success" type="button" id="more-car">More car</button>
            <input class="btn btn-primary" type="submit" value="Submit">
        </form>
    </div>
    <script>
        function SomeDeleteRowFunction(e) {
            e.parentElement.remove();
        }
        const btn = document.getElementById('more-car');
        btn.addEventListener('click', (e)=>{
            const moreCar = `
            <div class="mb-3 row">
                <label class="form-label col-md-6" >
                    Car
                    <select class="form-control" name="car-id-list">
                        <% cars.forEach(car => { %>
                            <option value="<%= car['ID'] %>"><%= car['NAME'] %></option>
                        <% }) %>
                    </select>
                </label>
                <label class="form-label col-md-4" >
                    Quantity
                    <input class="form-control" type="number" name="quantity-list" value="1" min="1" max="100">
                </label>
                <button type="button" onclick="SomeDeleteRowFunction(this)" class="btn btn-danger col-md-2">Delete</button>
            </div>
            `;
            btn.insertAdjacentHTML('beforebegin', moreCar);
        });
    </script>
</body>
</html>